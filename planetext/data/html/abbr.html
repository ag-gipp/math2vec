<!DOCTYPE html><html prefix="dcterms: http://purl.org/dc/terms/" lang="en">
<head>
<title>Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++</title>
<!--Generated on Thu Aug  9 08:04:38 2018 by LaTeXML (version 0.8.3) http://dlmf.nist.gov/LaTeXML/.-->

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line" lang="en">
<h1 class="ltx_title ltx_title_document">Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Wolfgang Wallner


</span><span class="ltx_author_notes"><span>
<span class="ltx_contact ltx_role_affiliation">Vienna University of Technology
<br class="ltx_break">Email: wolfgang-wallner@gmx.at
</span></span></span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id1" class="ltx_p">Real-time systems rely on a distributed global time base.
As any physical clock device suffers from noise, it is necessary to provide some kind of clock synchronization to establish such a global time base.
Different clock synchronization methods have been invented for individual application domains.
The  <a href="#id2.1.47"><span href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Precision Time Protocol</span></span></a> (<a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a>), which is specified in IEEE 1588, is another interesting option.
It targets local networks, where it is acceptable to assume small amounts of hardware support, and promises sub-microsecond precision.
PTP provides many different implementation and configuration options, and thus the  <a href="#id2.1.11"><span href="#id2.1.11" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Design Space Exploration</span></span></a> (<a href="#id2.1.11"><abbr href="#id2.1.11" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">DSE</span></abbr></a>) is challenging.
In this paper we discuss the implementation of realistic clock noise and its synchronization via  <a href="#id2.1.47"><span href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Precision Time Protocol</span></span></a> (<a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a>) in OMNeT++.
The components presented in this paper are intended to assist engineers with the configuration of <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> networks.</p>
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">I </span><span id="S1.1" class="ltx_text ltx_font_smallcaps">Introduction</span>
</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p"><a href="#id2.1.49"><span href="#id2.1.49" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long-plural">Real-Time Systems</span></span></a> are computer systems, where the progression of real time is of importance for the application which is carried out.
Distributed <a href="#id2.1.49"><abbr href="#id2.1.49" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short-plural">RTSs</span></abbr></a> are a special class of systems: here, several distributed computer systems fulfill a common task which is linked to the progression of real-time.
For such an application, it is of utmost importance that each local node has reliable knowledge of the current time.
A typical example for such a system could be several robots that work together in a production line: it’s easy to image that the correct operation of the overall system relies on the timely coordination between the individual systems.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">Any physical clock device suffers from imperfections <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite>, and an unsynchronized ensemble of clocks could drift away from each other without an upper bound over time.
To construct a distributed global time base, different synchronization methods have been developed, each with unique benefits and drawbacks.
The  <a href="#id2.1.47"><span href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Precision Time Protocol</span></span></a> (<a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a>), which is specified in IEEE 1588<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite>, presents another candidate to solve this problem.
<a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> promises sub-microsecond precision, while only requiring moderate costs.
The target domain for <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> are local networks, where it is acceptable that each node provides hardware support for timestamping egressing and ingressing network frames.</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p"><a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> presents many different options for its implementation and configuration.
To aid system designers with the task of <a href="#id2.1.11"><abbr href="#id2.1.11" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">DSE</span></abbr></a>, a simulation framework for <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> is of great value.
For my master thesis <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>]</cite>, I have developed such a simulation framework using OMNeT++ <span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span><a href="https://omnetpp.org/" title="" class="ltx_ref ltx_url"><span id="footnote1.1" class="ltx_text ltx_font_typewriter">https://omnetpp.org/</span></a></span></span></span>.
This paper gives an overview over the OMNeT++ specific aspects of this project.</p>
</div>
<section id="S1.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S1.SS1.5" class="ltx_text">I-A</span> </span><span id="S1.SS1.6" class="ltx_text ltx_font_italic">Related Work</span>
</h3>

<div id="S1.SS1.p1" class="ltx_para">
<p id="S1.SS1.p1.1" class="ltx_p">This paper describes a subset of what I have been working of for my master thesis <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>]</cite>.
My thesis deals with the simulation of oscillator noise and the synchronization of oscillators via the <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> which is specified in IEEE 1588.
An overall discussion of clocks and clock noise can be found in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite> and <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite>.
An algorithm on how to simulate a particular important noise type ( <a href="#id2.1.45"><span href="#id2.1.45" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Powerlaw Noise</span></span></a> (<a href="#id2.1.45"><abbr href="#id2.1.45" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PLN</span></abbr></a>)) is given in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>.
My own noise simulation library is a modification for this approach to make it more suitable for  <a href="#id2.1.10"><span href="#id2.1.10" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Discrete Event Simulation</span></span></a> (<a href="#id2.1.10"><abbr href="#id2.1.10" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">DES</span></abbr></a>) environments like OMNeT++.
In <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite> an efficient implementation of the above mentioned noise simulation and its implementation in OMNeT++ are described, however to the best knowledge of the author this implementation is not freely available and the description contains not enough details to reproduce their results.
Nevertheless this publication has served as an important guideline for the design of my own implementation.</p>
</div>
<div id="S1.SS1.p2" class="ltx_para">
<p id="S1.SS1.p2.1" class="ltx_p">The focus of this paper is on the OMNeT++-specific parts of my implementation.
Another publication named <span id="S1.SS1.p2.1.1" class="ltx_text ltx_emph ltx_font_italic">A Simulation Framework for IEEE 1588</span> will be presented at the 2016 International IEEE Symposium on Precision Clock Synchronization for Measurement, Control and Communication.
This other publication will contain a more detailed discussion of my noise simulation library.</p>
</div>
</section>
<section id="S1.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S1.SS2.5" class="ltx_text">I-B</span> </span><span id="S1.SS2.6" class="ltx_text ltx_font_italic">Focus of this work</span>
</h3>

<div id="S1.SS2.p1" class="ltx_para">
<p id="S1.SS2.p1.1" class="ltx_p">The goal for my thesis was to implement a simulation of clock synchronization via <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a>.
As I had to keep the project focus limited due to time constraints, I could only implement a subset of all components that would be present in a real physical <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> network.
What I have selected for my simulation is basically a minimal set of components to get a meaningful <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> simulation.
It consists of the following items:</p>
</div>
<div id="S1.SS2.p2" class="ltx_para">
<ul id="S1.I1" class="ltx_itemize">
<li id="S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i1.p1" class="ltx_para">
<p id="S1.I1.i1.p1.1" class="ltx_p"><span id="S1.I1.i1.p1.1.1" class="ltx_text ltx_font_bold">Noise generation:</span></p>
</div>
<div id="S1.I1.i1.p2" class="ltx_para">
<ul id="S1.I1.I1" class="ltx_itemize">
<li id="S1.I1.i1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S1.I1.i1.i1.1" class="ltx_text ltx_font_bold">–</span></span> 
<div id="S1.I1.i1.i1.p1" class="ltx_para">
<p id="S1.I1.i1.i1.p1.1" class="ltx_p">A generic clock model in OMNeT++, which can be extended by various noise implementations</p>
</div>
</li>
<li id="S1.I1.i1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S1.I1.i1.i2.1" class="ltx_text ltx_font_bold">–</span></span> 
<div id="S1.I1.i1.i2.p1" class="ltx_para">
<p id="S1.I1.i1.i2.p1.1" class="ltx_p">A simulation library for <a href="#id2.1.45"><span href="#id2.1.45" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Powerlaw Noise</span></span></a>, which is a noise type commonly found in oscillators</p>
</div>
</li>
</ul>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i2.p1" class="ltx_para">
<p id="S1.I1.i2.p1.1" class="ltx_p"><span id="S1.I1.i2.p1.1.1" class="ltx_text ltx_font_bold">Noise estimation:</span></p>
</div>
<div id="S1.I1.i2.p2" class="ltx_para">
<ul id="S1.I1.I2" class="ltx_itemize">
<li id="S1.I1.i2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S1.I1.i2.i1.1" class="ltx_text ltx_font_bold">–</span></span> 
<div id="S1.I1.i2.i1.p1" class="ltx_para">
<p id="S1.I1.i2.i1.p1.1" class="ltx_p">A <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> stack in OMNeT++, which implements most parts of the IEEE 1588-2008 standard, especially all clock and delay mechanism types</p>
</div>
</li>
<li id="S1.I1.i2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S1.I1.i2.i2.1" class="ltx_text ltx_font_bold">–</span></span> 
<div id="S1.I1.i2.i2.p1" class="ltx_para">
<p id="S1.I1.i2.i2.p1.1" class="ltx_p">An adaption of this generic <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> stack to implement <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> over Ethernet</p>
</div>
</li>
<li id="S1.I1.i2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S1.I1.i2.i3.1" class="ltx_text ltx_font_bold">–</span></span> 
<div id="S1.I1.i2.i3.p1" class="ltx_para">
<p id="S1.I1.i2.i3.p1.1" class="ltx_p">A generic model for <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> network nodes in OMNeT++</p>
</div>
</li>
</ul>
</div>
</li>
<li id="S1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i3.p1" class="ltx_para">
<p id="S1.I1.i3.p1.1" class="ltx_p"><span id="S1.I1.i3.p1.1.1" class="ltx_text ltx_font_bold">Noise cancellation:</span></p>
</div>
<div id="S1.I1.i3.p2" class="ltx_para">
<ul id="S1.I1.I3" class="ltx_itemize">
<li id="S1.I1.i3.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S1.I1.i3.i1.1" class="ltx_text ltx_font_bold">–</span></span> 
<div id="S1.I1.i3.i1.p1" class="ltx_para">
<p id="S1.I1.i3.i1.p1.1" class="ltx_p">A basic clock servo in OMNeT++ based on a  <a href="#id2.1.43"><span href="#id2.1.43" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">proportional-integral</span></span></a> (<a href="#id2.1.43"><abbr href="#id2.1.43" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PI</span></abbr></a>) controller</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div id="S1.SS2.p3" class="ltx_para ltx_noindent">
<p id="S1.SS2.p3.1" class="ltx_p">All of the above mentioned components have been designed to be modular and extensible.</p>
</div>
</section>
<section id="S1.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S1.SS3.5" class="ltx_text">I-C</span> </span><span id="S1.SS3.6" class="ltx_text ltx_font_italic">Structure of this work</span>
</h3>

<div id="S1.SS3.p1" class="ltx_para">
<p id="S1.SS3.p1.1" class="ltx_p">In <a href="#S2" title="II Precision Time Protocol ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Section II</span></a>, we present a short overview of how <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> works.
<a href="#S3" title="III Clock Model ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Section III</span></a> discusses clocks and clock noise, and how they are modeled in our simulation.
The structure of our <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> implementation in OMNeT++ is described in <a href="#S4" title="IV PTP Implementation ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Section IV</span></a>.
Finally, <a href="#S5" title="V Conclusion ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Section V</span></a> sums up the current project state, while <a href="#S6" title="VI Future Work ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Section VI</span></a> gives an outlook to possible improvements.</p>
</div>
</section>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">II </span><span id="S2.1" class="ltx_text ltx_font_smallcaps">Precision Time Protocol</span>
</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.1" class="ltx_p">This section intends to give a short overview over the principles of <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a>.
For a detailed discussion the interested reader is referred to the literature, e.g. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite>.</p>
</div>
<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S2.SS1.5" class="ltx_text">II-A</span> </span><span id="S2.SS1.6" class="ltx_text ltx_font_italic">Principal of operation</span>
</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p id="S2.SS1.p1.1" class="ltx_p">In a <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> network, the individual nodes will dynamically establishes a hierarchy with master-slave relationships.
Two adjacent master and slave nodes then exchange information to allow the slave the estimation of its own clock offset relative to the master.
Using this information, a slave node can then modify its own local clock device to minimize its offset.</p>
</div>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S2.SS2.5" class="ltx_text">II-B</span> </span><span id="S2.SS2.6" class="ltx_text ltx_font_italic">Overview</span>
</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p id="S2.SS2.p1.1" class="ltx_p">The overall functionality of <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> consists of:</p>
</div>
<div id="S2.SS2.p2" class="ltx_para">
<dl id="S2.I1" class="ltx_description">
<dt id="S2.I1.ix1" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S2.I1.ix1.1" class="ltx_text ltx_font_bold">Establishment of a clock hierarchy</span></span></dt>
<dd class="ltx_item">
<div id="S2.I1.ix1.p1" class="ltx_para">
<p id="S2.I1.ix1.p1.1" class="ltx_p"><a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> nodes exchange the attributes of their clock with their neighboring nodes.
This information is then used by a distributed algorithm (the  <a href="#id2.1.5"><span href="#id2.1.5" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Best Master Clock</span></span></a> (<a href="#id2.1.5"><abbr href="#id2.1.5" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">BMC</span></abbr></a>) algorithm), to establish a loop free master-slave hierarchy on the network.</p>
</div>
</dd>
<dt id="S2.I1.ix2" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S2.I1.ix2.1" class="ltx_text ltx_font_bold">Distribution of time information</span></span></dt>
<dd class="ltx_item">
<div id="S2.I1.ix2.p1" class="ltx_para">
<p id="S2.I1.ix2.p1.1" class="ltx_p"><a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> nodes with ports in the master state will periodically publish their current time value, using so called <span id="S2.I1.ix2.p1.1.1" class="ltx_text ltx_font_typewriter">Sync</span> messages.</p>
</div>
</dd>
<dt id="S2.I1.ix3" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S2.I1.ix3.1" class="ltx_text ltx_font_bold">Path delay estimation</span></span></dt>
<dd class="ltx_item">
<div id="S2.I1.ix3.p1" class="ltx_para">
<p id="S2.I1.ix3.p1.1" class="ltx_p">When a <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> node receives a <span id="S2.I1.ix3.p1.1.1" class="ltx_text ltx_font_typewriter">Sync</span> message on a slave port, it needs to estimate how long this message has been on its way.
To fulfill this task, <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> specifies two methods for path delay estimation.</p>
</div>
</dd>
<dt id="S2.I1.ix4" class="ltx_item"><span class="ltx_tag ltx_tag_item"><span id="S2.I1.ix4.1" class="ltx_text ltx_font_bold">Configuration interface</span></span></dt>
<dd class="ltx_item">
<div id="S2.I1.ix4.p1" class="ltx_para">
<p id="S2.I1.ix4.p1.1" class="ltx_p">Information of <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> nodes is organized in standardized data sets.
<a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> also specifies a management interface for accessing these data sets.</p>
</div>
</dd>
</dl>
</div>
</section>
<section id="S2.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S2.SS3.5" class="ltx_text">II-C</span> </span><span id="S2.SS3.6" class="ltx_text ltx_font_italic">Information exchange</span>
</h3>

<div id="S2.SS3.p1" class="ltx_para">
<p id="S2.SS3.p1.1" class="ltx_p">An example for a possible communication between a <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> master and a <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> slave is shown in <a href="#S2.F1" title="Figure 1 ‣ II-C Information exchange ‣ II Precision Time Protocol ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 1</span></a>.
The master periodically sends information about its current local time to the slave via <span id="S2.SS3.p1.1.1" class="ltx_text ltx_font_typewriter">Sync</span> messages.
To estimate the time interval that <span id="S2.SS3.p1.1.2" class="ltx_text ltx_font_typewriter">Sync</span> messages need until they arrive at the slave, the slave has to estimate the path delay.
It does so by periodically sending <span id="S2.SS3.p1.1.3" class="ltx_text ltx_font_typewriter">Delay_Requ</span> messages to the master, who then responds with <span id="S2.SS3.p1.1.4" class="ltx_text ltx_font_typewriter">Delay_Resp</span> messages.
The colored rectangles in the figure show the points in time when the frames are sent or received.
The colored circles below the figure sketch the knowledge on the slave side.
Using the collected information the slave is then able to estimate its own offset compared to the master.</p>
</div>
<figure id="S2.F1" class="ltx_figure"><img src="SyncPrinciple.png" id="S2.F1.g1" class="ltx_graphics ltx_centering" width="243" height="67" alt="">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Synchronization principle of <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a>.</figcaption>
</figure>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">III </span><span id="S3.1" class="ltx_text ltx_font_smallcaps">Clock Model</span>
</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.1" class="ltx_p">In this section we discuss our approach for having realistic clock noise in our OMNeT++ simulation model.</p>
</div>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S3.SS1.5" class="ltx_text">III-A</span> </span><span id="S3.SS1.6" class="ltx_text ltx_font_italic">Problem Statement</span>
</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.1" class="ltx_p">The systems we would like to simulate are distributed networks, where each network node has access to a local clock.
We are interested in high precision clock synchronization, thus it is important for us that the individual clocks do not provide the exact value of real time, but only a local estimation.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p id="S3.SS1.p2.1" class="ltx_p">The individual nodes rely on their clocks for two tasks:</p>
</div>
<div id="S3.SS1.p3" class="ltx_para">
<ul id="S3.I1" class="ltx_itemize">
<li id="S3.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i1.p1" class="ltx_para">
<p id="S3.I1.i1.p1.1" class="ltx_p"><span id="S3.I1.i1.p1.1.1" class="ltx_text ltx_font_bold">Timestamping:</span> Reading the current value of the local clock to generate a timestamp for a local event.</p>
</div>
</li>
<li id="S3.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i2.p1" class="ltx_para">
<p id="S3.I1.i2.p1.1" class="ltx_p"><span id="S3.I1.i2.p1.1.1" class="ltx_text ltx_font_bold">Scheduling:</span> Registering an event together with a future timestamp at the local clock.
The event will be delivered when the timestamp is reached on the local clock.</p>
</div>
</li>
</ul>
</div>
<div id="S3.SS1.p4" class="ltx_para ltx_noindent">
<p id="S3.SS1.p4.1" class="ltx_p">OMNeT++ provides <a href="#id2.1.2"><span href="#id2.1.2" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long-plural">Application Programming Interfaces</span></span></a> for these two tasks with respect to real-time (<span id="S3.SS1.p4.1.1" class="ltx_text ltx_font_typewriter">simTime()</span> and <span id="S3.SS1.p4.1.2" class="ltx_text ltx_font_typewriter">scheduleAt()</span>).
We need to implement similar <a href="#id2.1.2"><abbr href="#id2.1.2" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short-plural">APIs</span></abbr></a> for the simulation of (noisy) local clocks.
</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S3.SS2.5" class="ltx_text">III-B</span> </span><span id="S3.SS2.6" class="ltx_text ltx_font_italic">Clock Model</span>
</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p id="S3.SS2.p1.1" class="ltx_p">In <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite> a model for a digital clock is given.
This model consists of an oscillating device and a digital counter, which counts the oscillations.
The simulation model for our clocks is based on this model.
In a real clock, each of the two components could introduce noise.
For our simulation, we are not interested in the exact location inside a clock where the noise is introduced, but only on the effect that can be observed on the outside.
Thus, for our own model, we have modified the model from <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite> as follows:</p>
</div>
<div id="S3.SS2.p2" class="ltx_para">
<ul id="S3.I2" class="ltx_itemize">
<li id="S3.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I2.i1.p1" class="ltx_para">
<p id="S3.I2.i1.p1.1" class="ltx_p">Both the oscillator and the counter are assumed to be absolutely <span id="S3.I2.i1.p1.1.1" class="ltx_text ltx_emph ltx_font_italic">perfect</span></p>
</div>
</li>
<li id="S3.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I2.i2.p1" class="ltx_para">
<p id="S3.I2.i2.p1.1" class="ltx_p">In between these two we introduce a new component, called the noise generator.
As the name already implies, its sole purpose is to introduce noise in our clock model.</p>
</div>
</li>
<li id="S3.I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I2.i3.p1" class="ltx_para">
<p id="S3.I2.i3.p1.1" class="ltx_p">Finally, we have added a configurable scaling stage after the counter.
This component can be used to synchronize the local clock to a reference clock using linear scaling.</p>
</div>
</li>
</ul>
</div>
<div id="S3.SS2.p3" class="ltx_para">
<p id="S3.SS2.p3.1" class="ltx_p">A sketch of the complete clock model is given in <a href="#S3.F2" title="Figure 2 ‣ III-B Clock Model ‣ III Clock Model ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 2</span></a>.
<a href="#S3.SS4" title="III-D Implementation ‣ III Clock Model ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Subsection <span class="ltx_text">III-D</span></span></a> describes our implementation of this model.</p>
</div>
<figure id="S3.F2" class="ltx_figure"><img src="ClockModelNoise.png" id="S3.F2.g1" class="ltx_graphics ltx_centering" width="243" height="62" alt="">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Clock model used in our simulation. The image is based on picture given in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite>.</figcaption>
</figure>
</section>
<section id="S3.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S3.SS3.5" class="ltx_text">III-C</span> </span><span id="S3.SS3.6" class="ltx_text ltx_font_italic">Clock Noise</span>
</h3>

<div id="S3.SS3.p1" class="ltx_para">
<p id="S3.SS3.p1.1" class="ltx_p">Clock devices suffer from various influences that disturb their correct operation.
These influences can be categorized as follows <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>, <a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite>:</p>
</div>
<div id="S3.SS3.p2" class="ltx_para">
<ul id="S3.I3" class="ltx_itemize">
<li id="S3.I3.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I3.i1.p1" class="ltx_para">
<p id="S3.I3.i1.p1.1" class="ltx_p">Systematic influences (temperature dependence, aging, frequency drift)</p>
</div>
</li>
<li id="S3.I3.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I3.i2.p1" class="ltx_para">
<p id="S3.I3.i2.p1.1" class="ltx_p">Stochastic noise</p>
</div>
</li>
</ul>
</div>
<div id="S3.SS3.p3" class="ltx_para ltx_noindent">
<p id="S3.SS3.p3.1" class="ltx_p">The stochastic influences in most frequency sources (including quartz oscillators) can be modeled as a combination of noise processes where the power spectral density is related to the frequency as <math id="S3.SS3.p3.1.m1.1" class="ltx_Math" alttext="S_{y}(f)\propto f^{\alpha}" display="inline"><semantics id="S3.SS3.p3.1.m1.1a"><mrow id="S3.SS3.p3.1.m1.1.9" xref="S3.SS3.p3.1.m1.1.9.cmml"><mrow id="S3.SS3.p3.1.m1.1.9.1" xref="S3.SS3.p3.1.m1.1.9.1.cmml"><msub id="S3.SS3.p3.1.m1.1.9.1.2" xref="S3.SS3.p3.1.m1.1.9.1.2.cmml"><mi id="S3.SS3.p3.1.m1.1.1" xref="S3.SS3.p3.1.m1.1.1.cmml">S</mi><mi id="S3.SS3.p3.1.m1.1.2.1" xref="S3.SS3.p3.1.m1.1.2.1.cmml">y</mi></msub><mo id="S3.SS3.p3.1.m1.1.9.1.1" xref="S3.SS3.p3.1.m1.1.9.1.1.cmml">⁢</mo><mrow id="S3.SS3.p3.1.m1.1.9.1.3" xref="S3.SS3.p3.1.m1.1.9.1.cmml"><mo stretchy="false" id="S3.SS3.p3.1.m1.1.3" xref="S3.SS3.p3.1.m1.1.9.1.cmml">(</mo><mi id="S3.SS3.p3.1.m1.1.4" xref="S3.SS3.p3.1.m1.1.4.cmml">f</mi><mo stretchy="false" id="S3.SS3.p3.1.m1.1.5" xref="S3.SS3.p3.1.m1.1.9.1.cmml">)</mo></mrow></mrow><mo id="S3.SS3.p3.1.m1.1.6" xref="S3.SS3.p3.1.m1.1.6.cmml">∝</mo><msup id="S3.SS3.p3.1.m1.1.9.2" xref="S3.SS3.p3.1.m1.1.9.2.cmml"><mi id="S3.SS3.p3.1.m1.1.7" xref="S3.SS3.p3.1.m1.1.7.cmml">f</mi><mi id="S3.SS3.p3.1.m1.1.8.1" xref="S3.SS3.p3.1.m1.1.8.1.cmml">α</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.1.m1.1b"><apply id="S3.SS3.p3.1.m1.1.9.cmml" xref="S3.SS3.p3.1.m1.1.9"><csymbol cd="latexml" id="S3.SS3.p3.1.m1.1.6.cmml" xref="S3.SS3.p3.1.m1.1.6">proportional-to</csymbol><apply id="S3.SS3.p3.1.m1.1.9.1.cmml" xref="S3.SS3.p3.1.m1.1.9.1"><times id="S3.SS3.p3.1.m1.1.9.1.1.cmml" xref="S3.SS3.p3.1.m1.1.9.1.1"></times><apply id="S3.SS3.p3.1.m1.1.9.1.2.cmml" xref="S3.SS3.p3.1.m1.1.9.1.2"><csymbol cd="ambiguous" id="S3.SS3.p3.1.m1.1.9.1.2.1.cmml" xref="S3.SS3.p3.1.m1.1.9.1.2">subscript</csymbol><ci id="S3.SS3.p3.1.m1.1.1.cmml" xref="S3.SS3.p3.1.m1.1.1">𝑆</ci><ci id="S3.SS3.p3.1.m1.1.2.1.cmml" xref="S3.SS3.p3.1.m1.1.2.1">𝑦</ci></apply><ci id="S3.SS3.p3.1.m1.1.4.cmml" xref="S3.SS3.p3.1.m1.1.4">𝑓</ci></apply><apply id="S3.SS3.p3.1.m1.1.9.2.cmml" xref="S3.SS3.p3.1.m1.1.9.2"><csymbol cd="ambiguous" id="S3.SS3.p3.1.m1.1.9.2.1.cmml" xref="S3.SS3.p3.1.m1.1.9.2">superscript</csymbol><ci id="S3.SS3.p3.1.m1.1.7.cmml" xref="S3.SS3.p3.1.m1.1.7">𝑓</ci><ci id="S3.SS3.p3.1.m1.1.8.1.cmml" xref="S3.SS3.p3.1.m1.1.8.1">𝛼</ci></apply></apply></annotation-xml><annotation encoding="application/x-llamapun" id="S3.SS3.p3.1.m1.1c">italic-S POSTSUBSCRIPT:start italic-y POSTSUBSCRIPT:end OPEN:( italic-f CLOSE:) RELOP:proportional-to italic-f POSTSUPERSCRIPT:start italic-alpha POSTSUPERSCRIPT:end</annotation><annotation encoding="application/x-tex" id="S3.SS3.p3.1.m1.1d">S_{y}(f)\propto f^{\alpha}</annotation></semantics></math>.
This type of noise is referred to as  <a href="#id2.1.45"><span href="#id2.1.45" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Powerlaw Noise</span></span></a> (<a href="#id2.1.45"><abbr href="#id2.1.45" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PLN</span></abbr></a>).
For  <a href="#id2.1.45"><span href="#id2.1.45" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Powerlaw Noise</span></span></a> (<a href="#id2.1.45"><abbr href="#id2.1.45" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PLN</span></abbr></a>) found in common oscillators, it turns out that <math id="S3.SS3.p3.1.m2.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S3.SS3.p3.1.m2.1a"><mi id="S3.SS3.p3.1.m2.1.1" xref="S3.SS3.p3.1.m2.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.1.m2.1b"><ci id="S3.SS3.p3.1.m2.1.1.cmml" xref="S3.SS3.p3.1.m2.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-llamapun" id="S3.SS3.p3.1.m2.1c">italic-alpha</annotation><annotation encoding="application/x-tex" id="S3.SS3.p3.1.m2.1d">\alpha</annotation></semantics></math> has integer values in the interval <math id="S3.SS3.p3.1.m3.1" class="ltx_Math" alttext="-2\ldotp\ldotp 2" display="inline"><semantics id="S3.SS3.p3.1.m3.1a"><mrow id="S3.SS3.p3.1.m3.1.6" xref="S3.SS3.p3.1.m3.1.6.cmml"><mo id="S3.SS3.p3.1.m3.1.1" xref="S3.SS3.p3.1.m3.1.1.cmml">-</mo><mn id="S3.SS3.p3.1.m3.1.5" xref="S3.SS3.p3.1.m3.1.5.cmml">2..2</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.1.m3.1b"><apply id="S3.SS3.p3.1.m3.1.6.cmml" xref="S3.SS3.p3.1.m3.1.6"><minus id="S3.SS3.p3.1.m3.1.1.cmml" xref="S3.SS3.p3.1.m3.1.1"></minus><cn type="float" id="S3.SS3.p3.1.m3.1.5.cmml" xref="S3.SS3.p3.1.m3.1.5">2..2</cn></apply></annotation-xml><annotation encoding="application/x-llamapun" id="S3.SS3.p3.1.m3.1c">ADDOP:minus NUMBER:2..2</annotation><annotation encoding="application/x-tex" id="S3.SS3.p3.1.m3.1d">-2\ldotp\ldotp 2</annotation></semantics></math>.</p>
</div>
<div id="S3.SS3.p4" class="ltx_para">
<p id="S3.SS3.p4.1" class="ltx_p">While it would be desirable to have all a noise model for our simulations that covers all these effects, I could only implement a subset of them because of timely constraints.
Depending on what kind of time intervals are most important for an application, different clock influences have to be considered or can be neglected.
As we want to simulate high precision synchronization, I have considered it valuable to have an implementation of <a href="#id2.1.45"><abbr href="#id2.1.45" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PLN</span></abbr></a>, as it provides high-frequency noise as it is common in quartz oscillators.
On the other hand, influences like aging can probable neglected without affecting the overall simulation results too much.</p>
</div>
<div id="S3.SS3.p5" class="ltx_para">
<p id="S3.SS3.p5.1" class="ltx_p">I have designed and implemented a library for the simulation of <a href="#id2.1.45"><abbr href="#id2.1.45" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PLN</span></abbr></a>, call <span id="S3.SS3.p5.1.1" class="ltx_text ltx_emph ltx_font_italic">LibPLN</span> <span id="footnote2" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span><a href="https://github.com/w-wallner/libPLN" title="" class="ltx_ref ltx_url"><span id="footnote2.1" class="ltx_text ltx_font_typewriter">https://github.com/w-wallner/libPLN</span></a></span></span></span>.
The actual <a href="#id2.1.45"><abbr href="#id2.1.45" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PLN</span></abbr></a> simulation is based on the approach by Kasdin and Walter <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>, and ideas from <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite> and <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite>.</p>
</div>
</section>
<section id="S3.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S3.SS4.5" class="ltx_text">III-D</span> </span><span id="S3.SS4.6" class="ltx_text ltx_font_italic">Implementation</span>
</h3>

<div id="S3.SS4.p1" class="ltx_para">
<p id="S3.SS4.p1.1" class="ltx_p">To reduce the complexity of our implementation, the individual clock tasks are implemented in different classes.
<a href="#S3.F3" title="Figure 3 ‣ III-D Implementation ‣ III Clock Model ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 3</span></a> shows the relationship between the individual components of our model.</p>
</div>
<figure id="S3.F3" class="ltx_figure"><img src="Hierarchy.png" id="S3.F3.g1" class="ltx_graphics ltx_centering" width="163" height="156" alt="">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Hierarchy of our clock components</figcaption>
</figure>
<section id="S3.SS4.SSS0.Px1" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Hardware Clock</h4>

<div id="S3.SS4.SSS0.Px1.p1" class="ltx_para">
<p id="S3.SS4.SSS0.Px1.p1.1" class="ltx_p">The most basic class is the <span id="S3.SS4.SSS0.Px1.p1.1.1" class="ltx_text ltx_font_typewriter">HwClock</span>.
Its purpose is the translation between the continuous and perfect real-time, and a discrete imperfect local time estimate.
A hardware clock can not be adjusted, and its counter has no relationship to that of other clocks.</p>
</div>
<div id="S3.SS4.SSS0.Px1.p2" class="ltx_para">
<p id="S3.SS4.SSS0.Px1.p2.1" class="ltx_p">To fulfill its task, the hardware clock class relies on a component called <span id="S3.SS4.SSS0.Px1.p2.1.1" class="ltx_text ltx_font_typewriter">TdGen</span>, the  <a href="#id2.1.54"><span href="#id2.1.54" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Time Deviation</span></span></a> (<a href="#id2.1.54"><abbr href="#id2.1.54" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">TD</span></abbr></a>) generator.
This component implements the current deviation of the local oscillator from the perfect real-time.
It is this component that contains the noise model used in the simulation.
In my implementation, it uses the above described <span id="S3.SS4.SSS0.Px1.p2.1.2" class="ltx_text ltx_emph ltx_font_italic">LibPLN</span> and only simulates <a href="#id2.1.45"><span href="#id2.1.45" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Powerlaw Noise</span></span></a>.
Further s to the noise model could be implemented in this component (e.g. temperature dependence).</p>
</div>
<div id="S3.SS4.SSS0.Px1.p3" class="ltx_para">
<p id="S3.SS4.SSS0.Px1.p3.1" class="ltx_p">The local time estimate <math id="S3.SS4.SSS0.Px1.p3.1.m1.1" class="ltx_Math" alttext="t_{est}" display="inline"><semantics id="S3.SS4.SSS0.Px1.p3.1.m1.1a"><msub id="S3.SS4.SSS0.Px1.p3.1.m1.1.3" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.3.cmml"><mi id="S3.SS4.SSS0.Px1.p3.1.m1.1.1" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.1.cmml">t</mi><mrow id="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.cmml"><mi id="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.1" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.1.cmml">e</mi><mo id="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.4" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.4.cmml">⁢</mo><mi id="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.2" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.2.cmml">s</mi><mo id="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.4a" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.4.cmml">⁢</mo><mi id="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.3" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.3.cmml">t</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS0.Px1.p3.1.m1.1b"><apply id="S3.SS4.SSS0.Px1.p3.1.m1.1.3.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.3"><csymbol cd="ambiguous" id="S3.SS4.SSS0.Px1.p3.1.m1.1.3.1.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.3">subscript</csymbol><ci id="S3.SS4.SSS0.Px1.p3.1.m1.1.1.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.1">𝑡</ci><apply id="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1"><times id="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.4.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.4"></times><ci id="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.1.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.1">𝑒</ci><ci id="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.2.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.2">𝑠</ci><ci id="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.3.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m1.1.2.1.3">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-llamapun" id="S3.SS4.SSS0.Px1.p3.1.m1.1c">italic-t POSTSUBSCRIPT:start italic-e italic-s italic-t POSTSUBSCRIPT:end</annotation><annotation encoding="application/x-tex" id="S3.SS4.SSS0.Px1.p3.1.m1.1d">t_{est}</annotation></semantics></math> for the real-time <math id="S3.SS4.SSS0.Px1.p3.1.m2.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S3.SS4.SSS0.Px1.p3.1.m2.1a"><mi id="S3.SS4.SSS0.Px1.p3.1.m2.1.1" xref="S3.SS4.SSS0.Px1.p3.1.m2.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS0.Px1.p3.1.m2.1b"><ci id="S3.SS4.SSS0.Px1.p3.1.m2.1.1.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m2.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-llamapun" id="S3.SS4.SSS0.Px1.p3.1.m2.1c">italic-t</annotation><annotation encoding="application/x-tex" id="S3.SS4.SSS0.Px1.p3.1.m2.1d">t</annotation></semantics></math> can then be written as <math id="S3.SS4.SSS0.Px1.p3.1.m3.1" class="ltx_Math" alttext="t_{est}=t+TD(t)" display="inline"><semantics id="S3.SS4.SSS0.Px1.p3.1.m3.1a"><mrow id="S3.SS4.SSS0.Px1.p3.1.m3.1.11" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.cmml"><msub id="S3.SS4.SSS0.Px1.p3.1.m3.1.11.1" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.1.cmml"><mi id="S3.SS4.SSS0.Px1.p3.1.m3.1.1" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.1.cmml">t</mi><mrow id="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.cmml"><mi id="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.1" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.1.cmml">e</mi><mo id="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.4" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.4.cmml">⁢</mo><mi id="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.2" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.2.cmml">s</mi><mo id="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.4a" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.4.cmml">⁢</mo><mi id="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.3" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.3.cmml">t</mi></mrow></msub><mo id="S3.SS4.SSS0.Px1.p3.1.m3.1.3" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.3.cmml">=</mo><mrow id="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.cmml"><mi id="S3.SS4.SSS0.Px1.p3.1.m3.1.4" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.4.cmml">t</mi><mo id="S3.SS4.SSS0.Px1.p3.1.m3.1.5" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.5.cmml">+</mo><mrow id="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1.cmml"><mi id="S3.SS4.SSS0.Px1.p3.1.m3.1.6" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.6.cmml">T</mi><mo id="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1.1" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1.1.cmml">⁢</mo><mi id="S3.SS4.SSS0.Px1.p3.1.m3.1.7" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.7.cmml">D</mi><mo id="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1.1a" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1.1.cmml">⁢</mo><mrow id="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1.2" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1.cmml"><mo stretchy="false" id="S3.SS4.SSS0.Px1.p3.1.m3.1.8" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1.cmml">(</mo><mi id="S3.SS4.SSS0.Px1.p3.1.m3.1.9" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.9.cmml">t</mi><mo stretchy="false" id="S3.SS4.SSS0.Px1.p3.1.m3.1.10" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS0.Px1.p3.1.m3.1b"><apply id="S3.SS4.SSS0.Px1.p3.1.m3.1.11.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11"><eq id="S3.SS4.SSS0.Px1.p3.1.m3.1.3.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.3"></eq><apply id="S3.SS4.SSS0.Px1.p3.1.m3.1.11.1.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.1"><csymbol cd="ambiguous" id="S3.SS4.SSS0.Px1.p3.1.m3.1.11.1.1.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.1">subscript</csymbol><ci id="S3.SS4.SSS0.Px1.p3.1.m3.1.1.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.1">𝑡</ci><apply id="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1"><times id="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.4.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.4"></times><ci id="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.1.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.1">𝑒</ci><ci id="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.2.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.2">𝑠</ci><ci id="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.3.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.2.1.3">𝑡</ci></apply></apply><apply id="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2"><plus id="S3.SS4.SSS0.Px1.p3.1.m3.1.5.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.5"></plus><ci id="S3.SS4.SSS0.Px1.p3.1.m3.1.4.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.4">𝑡</ci><apply id="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1"><times id="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1.1.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.11.2.1.1"></times><ci id="S3.SS4.SSS0.Px1.p3.1.m3.1.6.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.6">𝑇</ci><ci id="S3.SS4.SSS0.Px1.p3.1.m3.1.7.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.7">𝐷</ci><ci id="S3.SS4.SSS0.Px1.p3.1.m3.1.9.cmml" xref="S3.SS4.SSS0.Px1.p3.1.m3.1.9">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-llamapun" id="S3.SS4.SSS0.Px1.p3.1.m3.1c">italic-t POSTSUBSCRIPT:start italic-e italic-s italic-t POSTSUBSCRIPT:end RELOP:equals italic-t ADDOP:plus italic-T italic-D OPEN:( italic-t CLOSE:)</annotation><annotation encoding="application/x-tex" id="S3.SS4.SSS0.Px1.p3.1.m3.1d">t_{est}=t+TD(t)</annotation></semantics></math>.
It is important that we can not assume to have an inverse for this function.
But we can rely on the fact that the local time estimation is always increasing.
This is important when we want to calculate the real-time when a specified local time estimate will be reached, as we need to this later to implement scheduling.</p>
</div>
</section>
<section id="S3.SS4.SSS0.Px2" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Adjustable Clock</h4>

<div id="S3.SS4.SSS0.Px2.p1" class="ltx_para">
<p id="S3.SS4.SSS0.Px2.p1.1" class="ltx_p">Adjustable clocks provide an abstraction on top of hardware clocks.
Their counter values can be modified, and their progress can be speed up or slowed down.
These features enable us to synchronize multiple adjustable clocks to each other.</p>
</div>
</section>
<section id="S3.SS4.SSS0.Px3" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Schedule Clock</h4>

<div id="S3.SS4.SSS0.Px3.p1" class="ltx_para">
<p id="S3.SS4.SSS0.Px3.p1.1" class="ltx_p">The finale clock class is the <span id="S3.SS4.SSS0.Px3.p1.1.1" class="ltx_text ltx_font_typewriter">ScheduleClock</span>, which provides an interface for other OMNeT++ components to schedule future events.
Internally, it stores the scheduled events in an ordered list, and only the first one is actually scheduled.
For the scheduling, it relies on the <a href="#id2.1.2"><abbr href="#id2.1.2" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">API</span></abbr></a> provided by the hardware clock for real-time estimation together with OMNeT++’s <span id="S3.SS4.SSS0.Px3.p1.1.2" class="ltx_text ltx_font_typewriter">scheduleAt()</span> functionality.</p>
</div>
</section>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">IV </span><span id="S4.1" class="ltx_text ltx_font_smallcaps">PTP Implementation</span>
</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">This section gives a brief overview over <span id="S4.p1.1.1" class="ltx_text ltx_emph ltx_font_italic">LibPTP</span>, our OMNeT++-based implementation of <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a>.</p>
</div>
<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S4.SS1.5" class="ltx_text">IV-A</span> </span><span id="S4.SS1.6" class="ltx_text ltx_font_italic">Node Architecture</span>
</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p id="S4.SS1.p1.1" class="ltx_p"><a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> defines several different types of network nodes (<a href="#id2.1.36"><span href="#id2.1.36" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long-plural">Ordinary Clocks</span></span></a>, <a href="#id2.1.4"><span href="#id2.1.4" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long-plural">Boundary Clocks</span></span></a> and <a href="#id2.1.53"><span href="#id2.1.53" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long-plural">Transparent Clocks</span></span></a>), as well as a large number of configuration options.
In <span id="S4.SS1.p1.1.1" class="ltx_text ltx_emph ltx_font_italic">LibPTP</span>, all these nodes are derived from a common base class, called <span id="S4.SS1.p1.1.2" class="ltx_text ltx_font_typewriter">PTP_BasicNode</span>.
The architecture of this base class is shown in <a href="#S4.F4" title="Figure 4 ‣ IV-A Node Architecture ‣ IV PTP Implementation ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 4</span></a>.
Most components from LibPTP are based on standard models from the INET library<span id="footnote3" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span><a href="https://inet.omnetpp.org" title="" class="ltx_ref ltx_url"><span id="footnote3.1" class="ltx_text ltx_font_typewriter">https://inet.omnetpp.org</span></a></span></span></span>.</p>
</div>
<figure id="S4.F4" class="ltx_figure"><img src="PTP_BasicNode.png" id="S4.F4.g1" class="ltx_graphics ltx_centering" width="190" height="159" alt="">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Architecture of a PTP Basic Node</figcaption>
</figure>
<div id="S4.SS1.p2" class="ltx_para">
<p id="S4.SS1.p2.1" class="ltx_p">The architecture shown here is a design choice with the intention to represent a basic <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a>-capable network device.
Any hardware related components have been placed on our simulated  <a href="#id2.1.34"><span href="#id2.1.34" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Network Interface Card</span></span></a> (<a href="#id2.1.34"><abbr href="#id2.1.34" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">NIC</span></abbr></a>).
Components outside the <a href="#id2.1.34"><abbr href="#id2.1.34" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">NIC</span></abbr></a> represent components that would typically be present as software in a real system.
The node model here is loosely based on the architecture of a PC with a <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a>-capable <a href="#id2.1.34"><abbr href="#id2.1.34" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">NIC</span></abbr></a>.
This is also why e.g. the clock that is used for the synchronization is shown as part of the simulated <a href="#id2.1.34"><abbr href="#id2.1.34" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">NIC</span></abbr></a>.</p>
</div>
<div id="S4.SS1.p3" class="ltx_para">
<p id="S4.SS1.p3.1" class="ltx_p">The layout of our node model is one of the topics where community feedback for the improvement of <span id="S4.SS1.p3.1.1" class="ltx_text ltx_emph ltx_font_italic">LibPTP</span> would be greatly appreciated.</p>
</div>
<section id="S4.SS1.SSS0.Px1" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">PTP Stack</h4>

<div id="S4.SS1.SSS0.Px1.p1" class="ltx_para">
<p id="S4.SS1.SSS0.Px1.p1.1" class="ltx_p">The most important component is the <span id="S4.SS1.SSS0.Px1.p1.1.1" class="ltx_text ltx_font_typewriter">PTP_Stack</span>, which is our implementation of the protocol as it is specified in IEEE 1588-2008 <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite>.</p>
</div>
</section>
<section id="S4.SS1.SSS0.Px2" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">PTP Ethernet Mapping</h4>

<div id="S4.SS1.SSS0.Px2.p1" class="ltx_para">
<p id="S4.SS1.SSS0.Px2.p1.1" class="ltx_p"><a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> does not depend on a single lower layer technology, and various mappings are standardized, e.g for <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> over  <a href="#id2.1.64"><span href="#id2.1.64" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">User Datagram Protocol</span></span></a> (<a href="#id2.1.64"><abbr href="#id2.1.64" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">UDP</span></abbr></a>), plain Ethernet, or different fieldbus systems.
For our project, we focused on <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> over Ethernet, which is specified in Annex F of IEEE 1588-2008.
The component <span id="S4.SS1.SSS0.Px2.p1.1.1" class="ltx_text ltx_font_typewriter">PTP_EthMap</span> implements this mapping.</p>
</div>
</section>
<section id="S4.SS1.SSS0.Px3" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Clock Servo</h4>

<div id="S4.SS1.SSS0.Px3.p1" class="ltx_para">
<p id="S4.SS1.SSS0.Px3.p1.1" class="ltx_p"><a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> only specifies a way to estimate the offset of a slave clock in reference to a master clock.
How this offset is minimized is the responsibility of the individual implementations, in particular that of the implemented clock servo controller.
Our simulation provides a generic interface for clock servos, and an example implementation using a <a href="#id2.1.43"><abbr href="#id2.1.43" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PI</span></abbr></a>-based clock servo design.</p>
</div>
</section>
<section id="S4.SS1.SSS0.Px4" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">LLC</h4>

<div id="S4.SS1.SSS0.Px4.p1" class="ltx_para">
<p id="S4.SS1.SSS0.Px4.p1.1" class="ltx_p">The component labeled <span id="S4.SS1.SSS0.Px4.p1.1.1" class="ltx_text ltx_font_typewriter">LLC</span> in <a href="#S4.F4" title="Figure 4 ‣ IV-A Node Architecture ‣ IV PTP Implementation ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 4</span></a> is the  <a href="#id2.1.30"><span href="#id2.1.30" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Logical Link Control</span></span></a> (<a href="#id2.1.30"><abbr href="#id2.1.30" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">LLC</span></abbr></a>).
It provides access to the <a href="#id2.1.34"><abbr href="#id2.1.34" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">NIC</span></abbr></a> based on the EtherType field of Ethernet frames.</p>
</div>
</section>
<section id="S4.SS1.SSS0.Px5" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">NIC</h4>

<div id="S4.SS1.SSS0.Px5.p1" class="ltx_para">
<p id="S4.SS1.SSS0.Px5.p1.1" class="ltx_p">Each <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> node has a <a href="#id2.1.34"><abbr href="#id2.1.34" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">NIC</span></abbr></a> with <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> hardware support.
<a href="#S4.F5" title="Figure 5 ‣ NIC ‣ IV-A Node Architecture ‣ IV PTP Implementation ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 5</span></a> shows the internal architecture of our <a href="#id2.1.34"><abbr href="#id2.1.34" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">NIC</span></abbr></a> model.</p>
</div>
<figure id="S4.F5" class="ltx_figure"><img src="PTP_NIC.png" id="S4.F5.g1" class="ltx_graphics ltx_centering" width="190" height="311" alt="">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5: </span>Internal architecture of our <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a>-capable <a href="#id2.1.34"><abbr href="#id2.1.34" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">NIC</span></abbr></a></figcaption>
</figure>
</section>
<section id="S4.SS1.SSS0.Px6" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Clock</h4>

<div id="S4.SS1.SSS0.Px6.p1" class="ltx_para">
<p id="S4.SS1.SSS0.Px6.p1.1" class="ltx_p">The clock inside the <a href="#id2.1.34"><abbr href="#id2.1.34" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">NIC</span></abbr></a> implements the clock model described in <a href="#S3" title="III Clock Model ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Section III</span></a>.</p>
</div>
</section>
<section id="S4.SS1.SSS0.Px7" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Relay Unit</h4>

<div id="S4.SS1.SSS0.Px7.p1" class="ltx_para">
<p id="S4.SS1.SSS0.Px7.p1.1" class="ltx_p">In case a network node with more than one physical network interface is simulated, it is the task of the <span id="S4.SS1.SSS0.Px7.p1.1.1" class="ltx_text ltx_font_typewriter">RelayUnit</span> component to distributed ingressing and egressing frames to the correct ports.</p>
</div>
</section>
<section id="S4.SS1.SSS0.Px8" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Delay</h4>

<div id="S4.SS1.SSS0.Px8.p1" class="ltx_para">
<p id="S4.SS1.SSS0.Px8.p1.1" class="ltx_p">To simulate arbitrary scheduling/queuing delays, a special <span id="S4.SS1.SSS0.Px8.p1.1.1" class="ltx_text ltx_font_typewriter">Delayer</span> component is added to our simulation model.</p>
</div>
</section>
<section id="S4.SS1.SSS0.Px9" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">MAC</h4>

<div id="S4.SS1.SSS0.Px9.p1" class="ltx_para">
<p id="S4.SS1.SSS0.Px9.p1.1" class="ltx_p">The  <a href="#id2.1.31"><span href="#id2.1.31" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Media Access Control</span></span></a> (<a href="#id2.1.31"><abbr href="#id2.1.31" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">MAC</span></abbr></a>) is based on the <span id="S4.SS1.SSS0.Px9.p1.1.1" class="ltx_text ltx_font_typewriter">EtherMAC</span> from INET, but adds timestamping support for <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> frames.</p>
</div>
</section>
<section id="S4.SS1.SSS0.Px10" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">PHY</h4>

<div id="S4.SS1.SSS0.Px10.p1" class="ltx_para">
<p id="S4.SS1.SSS0.Px10.p1.1" class="ltx_p">The  <a href="#id2.1.42"><span href="#id2.1.42" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">physical layer</span></span></a> (<a href="#id2.1.42"><abbr href="#id2.1.42" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PHY</span></abbr></a>) model provides support for simulating asymmetric paths.</p>
</div>
</section>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S4.SS2.5" class="ltx_text">IV-B</span> </span><span id="S4.SS2.6" class="ltx_text ltx_font_italic">Simulations</span>
</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p id="S4.SS2.p1.1" class="ltx_p">Using the combination of <span id="S4.SS2.p1.1.1" class="ltx_text ltx_emph ltx_font_italic">LibPTP</span> together with <span id="S4.SS2.p1.1.2" class="ltx_text ltx_emph ltx_font_italic">LibPLN</span> allows us to carry out simulations of clock synchronization via <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> in OMNeT++.</p>
</div>
<section id="S4.SS2.SSS0.Px1" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Sync interval</h4>

<div id="S4.SS2.SSS0.Px1.p1" class="ltx_para">
<p id="S4.SS2.SSS0.Px1.p1.1" class="ltx_p">On of the most important parameters for a <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> configuration is the interval for the sending of <span id="S4.SS2.SSS0.Px1.p1.1.1" class="ltx_text ltx_font_typewriter">Sync</span> messages.
The synchronization interval in <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> is given via the <span id="S4.SS2.SSS0.Px1.p1.1.2" class="ltx_text ltx_font_typewriter">logSyncInterval</span> parameter as <math id="S4.SS2.SSS0.Px1.p1.1.m1.1" class="ltx_Math" alttext="T_{sync}=2^{logSyncInterval}" display="inline"><semantics id="S4.SS2.SSS0.Px1.p1.1.m1.1a"><mrow id="S4.SS2.SSS0.Px1.p1.1.m1.1.6" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.6.cmml"><msub id="S4.SS2.SSS0.Px1.p1.1.m1.1.6.1" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.6.1.cmml"><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.1" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.1.cmml">T</mi><mrow id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.cmml"><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.1" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.1.cmml">s</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.5" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.5.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.2" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.2.cmml">y</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.5a" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.5.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.3" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.3.cmml">n</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.5b" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.5.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.4" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.4.cmml">c</mi></mrow></msub><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.3" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.3.cmml">=</mo><msup id="S4.SS2.SSS0.Px1.p1.1.m1.1.6.2" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.6.2.cmml"><mn id="S4.SS2.SSS0.Px1.p1.1.m1.1.4" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.4.cmml">2</mn><mrow id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.cmml"><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.1" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.1.cmml">l</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.2" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.2.cmml">o</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16a" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.3" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.3.cmml">g</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16b" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.4" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.4.cmml">S</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16c" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.5" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.5.cmml">y</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16d" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.6" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.6.cmml">n</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16e" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.7" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.7.cmml">c</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16f" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.8" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.8.cmml">I</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16g" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.9" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.9.cmml">n</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16h" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.10" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.10.cmml">t</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16i" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.11" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.11.cmml">e</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16j" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.12" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.12.cmml">r</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16k" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.13" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.13.cmml">v</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16l" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.14" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.14.cmml">a</mi><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16m" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml">⁢</mo><mi id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.15" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.15.cmml">l</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS0.Px1.p1.1.m1.1b"><apply id="S4.SS2.SSS0.Px1.p1.1.m1.1.6.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.6"><eq id="S4.SS2.SSS0.Px1.p1.1.m1.1.3.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.3"></eq><apply id="S4.SS2.SSS0.Px1.p1.1.m1.1.6.1.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.6.1"><csymbol cd="ambiguous" id="S4.SS2.SSS0.Px1.p1.1.m1.1.6.1.1.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.6.1">subscript</csymbol><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.1">𝑇</ci><apply id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1"><times id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.5.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.5"></times><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.1.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.1">𝑠</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.2.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.2">𝑦</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.3.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.3">𝑛</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.4.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.2.1.4">𝑐</ci></apply></apply><apply id="S4.SS2.SSS0.Px1.p1.1.m1.1.6.2.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.6.2"><csymbol cd="ambiguous" id="S4.SS2.SSS0.Px1.p1.1.m1.1.6.2.1.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.6.2">superscript</csymbol><cn type="integer" id="S4.SS2.SSS0.Px1.p1.1.m1.1.4.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.4">2</cn><apply id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1"><times id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.16"></times><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.1.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.1">𝑙</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.2.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.2">𝑜</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.3.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.3">𝑔</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.4.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.4">𝑆</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.5.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.5">𝑦</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.6.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.6">𝑛</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.7.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.7">𝑐</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.8.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.8">𝐼</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.9.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.9">𝑛</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.10.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.10">𝑡</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.11.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.11">𝑒</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.12.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.12">𝑟</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.13.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.13">𝑣</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.14.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.14">𝑎</ci><ci id="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.15.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.5.1.15">𝑙</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-llamapun" id="S4.SS2.SSS0.Px1.p1.1.m1.1c">italic-T POSTSUBSCRIPT:start italic-s italic-y italic-n italic-c POSTSUBSCRIPT:end RELOP:equals NUMBER:2 POSTSUPERSCRIPT:start italic-l italic-o italic-g italic-S italic-y italic-n italic-c italic-I italic-n italic-t italic-e italic-r italic-v italic-a italic-l POSTSUPERSCRIPT:end</annotation><annotation encoding="application/x-tex" id="S4.SS2.SSS0.Px1.p1.1.m1.1d">T_{sync}=2^{logSyncInterval}</annotation></semantics></math>, measured in seconds.
Configuring a long interval might degrade the reachable clock synchronization.
On the other hand, if an interval is configured which is too short, we might waste network bandwidth without any benefit for the precision of our global time-base.
Using OMNeT++’s support for parameter studies, we can configure a <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> network and find out an optimal value empirically.</p>
</div>
<div id="S4.SS2.SSS0.Px1.p2" class="ltx_para">
<p id="S4.SS2.SSS0.Px1.p2.1" class="ltx_p">Suppose we have a simple network, consisting of only two <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> nodes.
One of them has an excellent clock, and is the <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> master, while the other has a cheap oscillator and is the <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> slave.
Carrying out a parameter study for possible synchronization interval configurations could lead to a graph as shown in <a href="#S4.F6" title="Figure 6 ‣ Sync interval ‣ IV-B Simulations ‣ IV PTP Implementation ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 6</span></a>.
The image shows the worst-case jitter of the slave’s time estimate relative to the time of the master.</p>
</div>
<div id="S4.SS2.SSS0.Px1.p3" class="ltx_para">
<p id="S4.SS2.SSS0.Px1.p3.1" class="ltx_p">The slave was simulated to have one of two oscillators: either a cheap quartz oscillator as it could be found in typical consumer electronic devices or a quartz typical for wrist watches.
It can be seen that for both types of oscillators, the jitter decreases for shorter intervals, until it reaches an oscillator specific lower bound.
Further decreasing the interval won’t lead to better clock synchronization.</p>
</div>
<figure id="S4.F6" class="ltx_figure"><img src="SyncInterval_Jitter.png" id="S4.F6.g1" class="ltx_graphics ltx_centering" width="271" height="134" alt="">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 6: </span>Parameter study for showing the effect of different synchronization intervals.</figcaption>
</figure>
</section>
<section id="S4.SS2.SSS0.Px2" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Tracing and debugging</h4>

<div id="S4.SS2.SSS0.Px2.p1" class="ltx_para">
<p id="S4.SS2.SSS0.Px2.p1.1" class="ltx_p"><span id="S4.SS2.SSS0.Px2.p1.1.1" class="ltx_text ltx_emph ltx_font_italic">LibPTP</span> provides also sophisticated tracing and debugging support.
All relevant <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> properties are available as signals and statistics.
As an example, a trace of a <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> port state is shown in <a href="#S4.F7" title="Figure 7 ‣ Tracing and debugging ‣ IV-B Simulations ‣ IV PTP Implementation ‣ Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 7</span></a>.</p>
</div>
<figure id="S4.F7" class="ltx_figure"><img src="PortStates.png" id="S4.F7.g1" class="ltx_graphics ltx_centering" width="271" height="67" alt="">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 7: </span>Trace of a <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> port state</figcaption>
</figure>
<div id="S4.SS2.SSS0.Px2.p2" class="ltx_para ltx_noindent">
<p id="S4.SS2.SSS0.Px2.p2.1" class="ltx_p">Additionally, it is possible to enable various logging messages.
For example, it is easily possible to get a complete trace output of every single decision that is carried out when the nodes execute the <a href="#id2.1.5"><abbr href="#id2.1.5" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">BMC</span></abbr></a> or the  <a href="#id2.1.9"><span href="#id2.1.9" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Data Set Comparision</span></span></a> (<a href="#id2.1.9"><abbr href="#id2.1.9" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">DSC</span></abbr></a>) algorithms.</p>
</div>
</section>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">V </span><span id="S5.1" class="ltx_text ltx_font_smallcaps">Conclusion</span>
</h2>

<div id="S5.p1" class="ltx_para">
<p id="S5.p1.1" class="ltx_p">Our project has shown that it is feasible to implement realistic clock noise in OMNeT++, as well as to carry out simulations of clock synchronization via <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a>.
To best knowledge of the author, it is the most sophisticated implementation of IEEE 1588 in OMNeT++ which is freely available.
All source code is released under open source licenses<span id="footnote4" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_tag ltx_tag_note">4</span>Most parts are released under the GPL, the rest under the BSD license.</span></span></span> on Github<span id="footnote5" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">5</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">5</sup><span class="ltx_tag ltx_tag_note">5</span><a href="https://github.com/w-wallner/libPTP" title="" class="ltx_ref ltx_url"><span id="footnote5.1" class="ltx_text ltx_font_typewriter">https://github.com/w-wallner/libPTP</span></a></span></span></span>.
Additionally, also a portable library called <span id="S5.p1.1.1" class="ltx_text ltx_emph ltx_font_italic">LibPLN</span> for the efficient simulation of <a href="#id2.1.45"><span href="#id2.1.45" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long">Powerlaw Noise</span></span></a> in <a href="#id2.1.10"><abbr href="#id2.1.10" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">DES</span></abbr></a>-environment like OMNeT++ was implemented.
Again, everything is available to the community as open source on Github<span id="footnote6" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">6</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">6</sup><span class="ltx_tag ltx_tag_note">6</span><a href="https://github.com/w-wallner/libPTL" title="" class="ltx_ref ltx_url"><span id="footnote6.1" class="ltx_text ltx_font_typewriter">https://github.com/w-wallner/libPTL</span></a></span></span></span>.
The components presented here should help engineers with the difficult task of <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> <a href="#id2.1.11"><abbr href="#id2.1.11" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">DSE</span></abbr></a>.</p>
</div>
<div id="S5.p2" class="ltx_para">
<p id="S5.p2.1" class="ltx_p">All of the implemented components have been designed to be extensible, so that other users can modify and improve them for their own projects.</p>
</div>
<div id="S5.p3" class="ltx_para">
<p id="S5.p3.1" class="ltx_p">As a side effect, having an OMNeT++-based implementation of <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> has proven to be an excellent tool when teaching other people how <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> works.</p>
</div>
</section>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">VI </span><span id="S6.1" class="ltx_text ltx_font_smallcaps">Future Work</span>
</h2>

<div id="S6.p1" class="ltx_para">
<p id="S6.p1.1" class="ltx_p">I have worked on this project mainly for my master thesis.
During this time, I have worked on it in private.
As my thesis is finished now, I have released all related source code under open source licenses, in the hope to find interested community members for further enhancements.</p>
</div>
<div id="S6.p2" class="ltx_para">
<p id="S6.p2.1" class="ltx_p">Future improvements to <span id="S6.p2.1.1" class="ltx_text ltx_emph ltx_font_italic">LibPTP</span> could include:</p>
</div>
<div id="S6.p3" class="ltx_para">
<ul id="S6.I1" class="ltx_itemize">
<li id="S6.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S6.I1.i1.p1" class="ltx_para">
<p id="S6.I1.i1.p1.1" class="ltx_p"><span id="S6.I1.i1.p1.1.1" class="ltx_text ltx_font_bold">Extending PTP options:</span>
Currently only a subset of the standardized <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> options is implemented in <span id="S6.I1.i1.p1.1.2" class="ltx_text ltx_emph ltx_font_italic">LibPTP</span>.
Extending this support would further enhance the capabilities for <a href="#id2.1.11"><abbr href="#id2.1.11" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">DSE</span></abbr></a>.
Of interest would be e.g. unicast support, <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> over <a href="#id2.1.64"><abbr href="#id2.1.64" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">UDP</span></abbr></a> or support for different <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> profiles.</p>
</div>
</li>
<li id="S6.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S6.I1.i2.p1" class="ltx_para">
<p id="S6.I1.i2.p1.1" class="ltx_p"><span id="S6.I1.i2.p1.1.1" class="ltx_text ltx_font_bold">Mainlining LibPTP:</span>
<span id="S6.I1.i2.p1.1.2" class="ltx_text ltx_emph ltx_font_italic">LibPTP</span> is derived from components in the INET library, but it is not related to upstream development.
This implies that the projects will drift further apart.
It would be of great benefit to try to merge at least some of the work upstream.</p>
</div>
</li>
<li id="S6.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S6.I1.i3.p1" class="ltx_para">
<p id="S6.I1.i3.p1.1" class="ltx_p"><span id="S6.I1.i3.p1.1.1" class="ltx_text ltx_font_bold">Improving the noise model:</span>
Currently, only stochastic noise of oscillators is modeled (using <span id="S6.I1.i3.p1.1.2" class="ltx_text ltx_emph ltx_font_italic">LibPLN</span>).
It would be interesting to add support for deterministic influences like temperature to the simulation model.
This would allow the simulation to provide even more realistic results.</p>
</div>
</li>
</ul>
</div>
</section>
<section id="S7" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">VII </span><span id="S7.1" class="ltx_text ltx_font_smallcaps">Acknowledgements</span>
</h2>

<div id="S7.p1" class="ltx_para">
<p id="S7.p1.1" class="ltx_p">I would like to thank my supervisor Armin Wasicek for his support during my master thesis.
I am grateful to both the OMNeT++ and INET communities: without the availability of their excellent tools/libraries, my <a href="#id2.1.47"><abbr href="#id2.1.47" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">PTP</span></abbr></a> implementation would not have been possible.</p>
</div>
</section>
<section id="id2" class="ltx_glossary ltx_acronym ltx_role_acronym">
<dl id="id2.1" class="ltx_glossarylist">
<dt id="id2.1.1" class="ltx_glossaryentry ltx_role_acronym">ADEV</dt>
<dd>Allan Deviation</dd>
<dt id="id2.1.2" class="ltx_glossaryentry ltx_role_acronym">API</dt>
<dd>Application Programming Interface</dd>
<dt id="id2.1.3" class="ltx_glossaryentry ltx_role_acronym">AVAR</dt>
<dd>Allan Variance</dd>
<dt id="id2.1.4" class="ltx_glossaryentry ltx_role_acronym">BC</dt>
<dd>Boundary Clock</dd>
<dt id="id2.1.5" class="ltx_glossaryentry ltx_role_acronym">BMC</dt>
<dd>Best Master Clock</dd>
<dt id="id2.1.6" class="ltx_glossaryentry ltx_role_acronym">COTS</dt>
<dd>Commercial off-the-shelf</dd>
<dt id="id2.1.7" class="ltx_glossaryentry ltx_role_acronym">CM</dt>
<dd>Compound Module</dd>
<dt id="id2.1.8" class="ltx_glossaryentry ltx_role_acronym">CSV</dt>
<dd>Comma-separated values</dd>
<dt id="id2.1.9" class="ltx_glossaryentry ltx_role_acronym">DSC</dt>
<dd>Data Set Comparision</dd>
<dt id="id2.1.10" class="ltx_glossaryentry ltx_role_acronym">DES</dt>
<dd>Discrete Event Simulation</dd>
<dt id="id2.1.11" class="ltx_glossaryentry ltx_role_acronym">DSE</dt>
<dd>Design Space Exploration</dd>
<dt id="id2.1.12" class="ltx_glossaryentry ltx_role_acronym">E2E</dt>
<dd>End-to-End</dd>
<dt id="id2.1.13" class="ltx_glossaryentry ltx_role_acronym">FFM</dt>
<dd>Flicker Frequency Modulation</dd>
<dt id="id2.1.14" class="ltx_glossaryentry ltx_role_acronym">FFD</dt>
<dd>Fractional Frequency Deviation</dd>
<dt id="id2.1.15" class="ltx_glossaryentry ltx_role_acronym">FIR</dt>
<dd>Finite Impulse Response</dd>
<dt id="id2.1.16" class="ltx_glossaryentry ltx_role_acronym">FPM</dt>
<dd>Flicker Phase Modulation</dd>
<dt id="id2.1.17" class="ltx_glossaryentry ltx_role_acronym">FSA</dt>
<dd>Frequency Stability Analysis</dd>
<dt id="id2.1.18" class="ltx_glossaryentry ltx_role_acronym">FFT</dt>
<dd>Fast Fourier transform</dd>
<dt id="id2.1.19" class="ltx_glossaryentry ltx_role_acronym">FFTW</dt>
<dd>Fastest Fourier Transform in the West</dd>
<dt id="id2.1.20" class="ltx_glossaryentry ltx_role_acronym">GPL</dt>
<dd>GNU General Public License</dd>
<dt id="id2.1.21" class="ltx_glossaryentry ltx_role_acronym">GPS</dt>
<dd>Global Positioning System</dd>
<dt id="id2.1.22" class="ltx_glossaryentry ltx_role_acronym">GSL</dt>
<dd>GNU Scientific Library</dd>
<dt id="id2.1.23" class="ltx_glossaryentry ltx_role_acronym">GUI</dt>
<dd>Graphical User Interface</dd>
<dt id="id2.1.24" class="ltx_glossaryentry ltx_role_acronym">HP</dt>
<dd>High Pass</dd>
<dt id="id2.1.25" class="ltx_glossaryentry ltx_role_acronym">IDE</dt>
<dd>Integrated Development Environment</dd>
<dt id="id2.1.26" class="ltx_glossaryentry ltx_role_acronym">IEEE</dt>
<dd>Institute of Electrical and Electronics Engineers</dd>
<dt id="id2.1.27" class="ltx_glossaryentry ltx_role_acronym">IIR</dt>
<dd>Infinite Impulse Response</dd>
<dt id="id2.1.28" class="ltx_glossaryentry ltx_role_acronym">ISPCS</dt>
<dd>International IEEE Symposium on Precision Clock Synchronization for Measurement, Control and Communication</dd>
<dt id="id2.1.29" class="ltx_glossaryentry ltx_role_acronym">LAN</dt>
<dd>Local Area Network</dd>
<dt id="id2.1.30" class="ltx_glossaryentry ltx_role_acronym">LLC</dt>
<dd>Logical Link Control</dd>
<dt id="id2.1.31" class="ltx_glossaryentry ltx_role_acronym">MAC</dt>
<dd>Media Access Control</dd>
<dt id="id2.1.32" class="ltx_glossaryentry ltx_role_acronym">MAVAR</dt>
<dd>Modified Allan Variance</dd>
<dt id="id2.1.33" class="ltx_glossaryentry ltx_role_acronym">NED</dt>
<dd>Network Description</dd>
<dt id="id2.1.34" class="ltx_glossaryentry ltx_role_acronym">NIC</dt>
<dd>Network Interface Card</dd>
<dt id="id2.1.35" class="ltx_glossaryentry ltx_role_acronym">NTP</dt>
<dd>Network Time Protocol</dd>
<dt id="id2.1.36" class="ltx_glossaryentry ltx_role_acronym">OC</dt>
<dd>Ordinary Clock</dd>
<dt id="id2.1.37" class="ltx_glossaryentry ltx_role_acronym">OCXO</dt>
<dd>Oven Controlled Crystal Oscillator</dd>
<dt id="id2.1.38" class="ltx_glossaryentry ltx_role_acronym">OMNeT++</dt>
<dd>Objective Modular Network Testbed in C++</dd>
<dt id="id2.1.39" class="ltx_glossaryentry ltx_role_acronym">OS</dt>
<dd>Operating System</dd>
<dt id="id2.1.40" class="ltx_glossaryentry ltx_role_acronym">P2P</dt>
<dd>Peer-to-Peer</dd>
<dt id="id2.1.41" class="ltx_glossaryentry ltx_role_acronym">PC</dt>
<dd>Personal computer</dd>
<dt id="id2.1.42" class="ltx_glossaryentry ltx_role_acronym">PHY</dt>
<dd>physical layer</dd>
<dt id="id2.1.43" class="ltx_glossaryentry ltx_role_acronym">PI</dt>
<dd>proportional-integral</dd>
<dt id="id2.1.44" class="ltx_glossaryentry ltx_role_acronym">PID</dt>
<dd>proportional-integral-derivative</dd>
<dt id="id2.1.45" class="ltx_glossaryentry ltx_role_acronym">PLN</dt>
<dd>Powerlaw Noise</dd>
<dt id="id2.1.46" class="ltx_glossaryentry ltx_role_acronym">PSD</dt>
<dd>Power Spectral Density</dd>
<dt id="id2.1.47" class="ltx_glossaryentry ltx_role_acronym">PTP</dt>
<dd>Precision Time Protocol</dd>
<dt id="id2.1.48" class="ltx_glossaryentry ltx_role_acronym">RGMII</dt>
<dd>Reduced Gigabit Media-Independent Interface</dd>
<dt id="id2.1.49" class="ltx_glossaryentry ltx_role_acronym">RTS</dt>
<dd>Real-Time System</dd>
<dt id="id2.1.50" class="ltx_glossaryentry ltx_role_acronym">RW</dt>
<dd>Random Walk</dd>
<dt id="id2.1.51" class="ltx_glossaryentry ltx_role_acronym">SP</dt>
<dd>Scale Point</dd>
<dt id="id2.1.52" class="ltx_glossaryentry ltx_role_acronym">SM</dt>
<dd>Simple Module</dd>
<dt id="id2.1.53" class="ltx_glossaryentry ltx_role_acronym">TC</dt>
<dd>Transparent Clock</dd>
<dt id="id2.1.54" class="ltx_glossaryentry ltx_role_acronym">TD</dt>
<dd>Time Deviation</dd>
<dt id="id2.1.55" class="ltx_glossaryentry ltx_role_acronym">TDG</dt>
<dd>
<a href="#id2.1.54"><abbr href="#id2.1.54" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">TD</span></abbr></a> Generator</dd>
<dt id="id2.1.56" class="ltx_glossaryentry ltx_role_acronym">TDO</dt>
<dd>
<a href="#id2.1.54"><abbr href="#id2.1.54" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">TD</span></abbr></a> Oracle</dd>
<dt id="id2.1.57" class="ltx_glossaryentry ltx_role_acronym">TDV</dt>
<dd>
<a href="#id2.1.54"><abbr href="#id2.1.54" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">TD</span></abbr></a> Vector</dd>
<dt id="id2.1.58" class="ltx_glossaryentry ltx_role_acronym">TDVG</dt>
<dd> <a href="#id2.1.57"><span href="#id2.1.57" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long"><abbr title="" class="ltx_glossaryref ltx_role_acronym"></abbr> Vector</span></span></a> (<a href="#id2.1.57"><abbr href="#id2.1.57" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">TDV</span></abbr></a>) Generator</dd>
<dt id="id2.1.59" class="ltx_glossaryentry ltx_role_acronym">TDVS</dt>
<dd>
<a href="#id2.1.57"><abbr href="#id2.1.57" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">TDV</span></abbr></a> Storage</dd>
<dt id="id2.1.60" class="ltx_glossaryentry ltx_role_acronym">TDEC</dt>
<dd> <a href="#id2.1.61"><span href="#id2.1.61" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_long"><abbr title="" class="ltx_glossaryref ltx_role_acronym"></abbr> Estimator</span></span></a> (<a href="#id2.1.61"><abbr href="#id2.1.61" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">TDE</span></abbr></a>) Chain</dd>
<dt id="id2.1.61" class="ltx_glossaryentry ltx_role_acronym">TDE</dt>
<dd>
<a href="#id2.1.54"><abbr href="#id2.1.54" title="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++" class="ltx_glossaryref ltx_role_acronym"><span class="ltx_text ltx_glossary_short">TD</span></abbr></a> Estimator</dd>
<dt id="id2.1.62" class="ltx_glossaryentry ltx_role_acronym">TSA</dt>
<dd>Time Series Analysis</dd>
<dt id="id2.1.63" class="ltx_glossaryentry ltx_role_acronym">UML</dt>
<dd>Unified Modeling Language</dd>
<dt id="id2.1.64" class="ltx_glossaryentry ltx_role_acronym">UDP</dt>
<dd>User Datagram Protocol</dd>
<dt id="id2.1.65" class="ltx_glossaryentry ltx_role_acronym">WFM</dt>
<dd>White Frequency Modulation</dd>
<dt id="id2.1.66" class="ltx_glossaryentry ltx_role_acronym">WPM</dt>
<dd>White Phase Modulation</dd>
</dl>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
<span id="bib.bib1.1" class="ltx_text ltx_emph ltx_font_italic">IEEE Standard for a Precision Clock Synchronization Protocol for Networked Measurement and Control Systems</span>   IEEE Std. 1588-2008, 2008.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
W. Wallner, <span id="bib.bib2.1" class="ltx_text ltx_emph ltx_font_italic">Simulation of Time-synchronized Networks using IEEE 1588-2008</span>   Master’s thesis, Faculty of Informatics, Vienna University of Technology, 2016.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
G. Gaderer et al, <span id="bib.bib3.1" class="ltx_text ltx_emph ltx_font_italic">Achieving a Realistic Notion of Time in Discrete Event Simulation</span>   International Journal of Distributed Sensor Networks, 2011.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
N. Kasdin and T. Walter, <span id="bib.bib4.1" class="ltx_text ltx_emph ltx_font_italic">Discrete Simulation of Power Law noise</span>   Proceedings of the 1992 IEEE Frequency Control Symposium, 1992.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
J. C. Eidson, <span id="bib.bib5.1" class="ltx_text ltx_emph ltx_font_italic">Measurement, Control, and Communication Using IEEE 1588</span>   Springer, 2006.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
D.  W. Allan, N. Ashby, C. C. Hodge, <span id="bib.bib6.1" class="ltx_text ltx_emph ltx_font_italic">Application Note 1289: The Science of Timekeeping</span>   Agilent Technologies, 2000.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
W. J. Riley, <span id="bib.bib7.1" class="ltx_text ltx_emph ltx_font_italic">NIST Special Publication 1065: Handbook of Frequency Stability Analysis</span>   National Institute of Standards and Technology, U.S. Department of Commerce, 2008.

</span>
</li>
</ul>
</section><div class="ltx_rdf" about="" property="dcterms:title" content="Simulation of the IEEE 1588 Precision Time Protocol in OMNeT++"></div>

</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Thu Aug  9 08:04:38 2018 by <a href="http://dlmf.nist.gov/LaTeXML/">LaTeXML <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="[LOGO]"></a>
</div></footer>
</div>
</body>
</html>
